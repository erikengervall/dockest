#!/bin/sh

##
## If there's buildable updates, compile the code and add it to the commit
##

## 
buildableFilesTouched="$(git diff --cached --name-only | grep 'src/' | uniq)"

## In order to prevent infinite commit>post-commit>loop
if [ -z "$buildableFilesTouched" ]; then
	exit 0
else
	echo "â³ pre-commit"
	if yarn build; then
		git add ./dist
		echo "âœ… pre-commit \n"
	else
		echo "ğŸ”¥ pre-commit \n"
		exit 1
	fi;
fi;
