#!/bin/sh

##
## Generate new docs
##
yarn docs
git add ./docs

##
## If there's buildable updates, compile the code and add it to the commit
##
exit 0 # disabled
buildableFilesTouched="$(git diff --cached --name-only | grep 'src/' | uniq)"

## In order to prevent infinite commit>post-commit>loop
if [ -z "$buildableFilesTouched" ]; then
	exit 0
else
	echo "â³â³â³ pre-commit â³â³â³"
	if yarn build; then
		git add ./dist
		echo "âœ…âœ…âœ… pre-commit âœ…âœ…âœ… \n"
	else
		echo "ğŸ”¥ğŸ”¥ğŸ”¥ pre-commit ğŸ”¥ğŸ”¥ğŸ”¥ \n"
		exit 1
	fi;
fi;
