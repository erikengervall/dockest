#!/usr/bin/env python

import sys, os, re
from subprocess import check_output

# Collect the parameters
commit_msg_filepath = sys.argv[1]

if re.search('#\d+$', branch):
    ## print "prepare-commit-msg: Oh hey, it's an issue branch."
    result = re.match('.*(#\d+$)', branch)
    issue_number = result.group(1)
    with open(commit_msg_filepath, 'r+') as f:
        message = f.read()
        f.seek(0, 0)
        newMessage = "%s: %s" % (issue_number, message)
        f.write(newMessage)
